
  
D3 中的一个基本概念是数据连接。数据连接创建对应关系 介于数据数组和 HTML 或 SVG 元素选择之间。加入数组 HTML/SVG 元素意味着： 
• 每个数组元素都有一个相应的HTML/SVG 元素。 
• 每个 HTML/SVG 元素都可以根据以下内容进行定位、调整大小和样式： 其对应数组元素的值。

##   创建数据连接

创建数据连接的一般模式是：

```js
d3.select(container)
.selectAll(element-type)
.data(array)
.join(element-type);
```

• 容器是一个 CSS 选择器字符串，它指定将包含以下内容的元素：加入 HTML/SVG 元素
• element-type 是一个字符串，描述您要加入的元素的类型（例如“div”或'circle') 
• array 是您要加入的数组的名称

容器是一个单一元素，将充当 HTML/SVG 元素的父元素，你正在加入。我们来看一个具体的例子。假设您有一个值数组：

```js
let myData = [10, 40, 30];
```

and the following SVG:

```html
<svg> 
	<g class="chart">
	</g>
</svg>
```
我们将使用 g 元素作为容器，并将数组连接到圆形元素。这最终结果将如下所示：

```html
<svg> 
<g class="chart"> 
	<circle></circle> <circle></circle> <circle></circle>
</g>
</svg>
```
其代码是：

```js
d3.select('g.chart')
.selectAll('circle')
.data(myData)
.join('circle');
```

  
第一行：

选择将成为容器（或“父级”）的单个 HTML 或 SVG 元素连接的 HTML 或 SVG 元素。

第二行：
选择您要加入的 HTML/SVG 元素。在我们的示例中，我们正在加入圆圈元素添加到数组中，因此我们选择所有圆形元素。您总是使用 .selectAll 来做出这个选择。

>即使页面上没有圆圈，您仍然可以进行选择的圆圈。生成的选择是空的，但它仍然是有效的选择。这D3 连接的一个方面可能很难掌握，因此可能会令人困惑。相信一旦你习惯了它就会更有意义。

第三行：
指定您要加入的数组。在此示例中，我们将加入 myData 数组。
  
最后一行：
创建连接。您传入您想要 D3 的 HTML 或 SVG 元素的类型创造。 （一般来说，相同的元素类型将被传递到 .selectAll 和 .join 中。）

当执行这四行代码时，会添加或删除圆形元素，例如每个数组元素都有一个对应的圆。

这是 Codepen 中的示例：https://codepen.io/createwithdata/pen/ZEQxyyJ34
您将看不到任何输出，因为每个圆的半径为零，因此将不可见。然而，如果右键单击 SVG 元素（其颜色为浅灰色）并选择检查（或类似）您将能够看到页面的元素。展开 svg 和 g元素，您应该看到 D3 添加的三个圆圈：

### 回顾
D3 数据连接在值数组和选择的值之间创建对应关系HTML/SVG 元素。创建联接的一般模式是：

```js
d3.select(container)
.selectAll(element-type)
.data(array)
.join(element-type);
```
# 微前端架构和挑战

微前端代表一个业务领域，它是自治的、可独立交付的并由单个团队拥有。本描述中的关键要点（稍后将讨论）与微前端背后的原则密切相关：

* 业务领域表示
* 自治代码库
* 独立部署
* 单一团队所有权

微前端提供了许多机会。选择合适的取决于项目要求、组织结构和开发人员的经验。在这些架构中，我们面临一些特定的成功挑战，这些挑战取决于我们希望如何在微前端之间进行通信，我们希望如何将用户从一个视图路由到另一个视图，以及最重要的是，我们如何确定微前端的大小。一个微前端。

在本章中，我们将介绍在启动具有微前端架构的项目时要做出的关键决策。然后，我们将讨论一些在生产中使用微前端的公司及其方法。

## 微前端决策框架

构建微前端应用程序有不同的方法。要为我们的项目选择最佳方法，我们需要了解我们将在其中运行的环境。一些架构决策需要预先做出，因为它们将指导未来的决策，例如
 
如何定义微前端，如何编排不同的视图，如何为用户构建最终视图，以及微前端如何通信和共享数据。这些类型的决策称为微前端决策框架。它由四个关键领域组成：

* 定义架构中的微前端是什么  Defining what a micro-frontend is in your architecture
* 组成微前端  Composing micro-frontends
* 路由微前端  Routing micro-frontends
* 微前端之间的通信 Communicating between micro-frontends

### Define Micro-Frontends 定义微前端

让我们从第一个关键决定开始，这将对其他决定产生重大影响。我们需要从技术角度确定我们如何考虑微前端。我们可以决定在同一个视图中有多个微前端，或者每个视图只有一个微前端（图 3-1）。


通过水平拆分，多个微前端将在同一个视图上。多个团队将负责部分视图，并且需要协调他们的工作。考虑到我们甚至可以在不同的视图中重用一些微前端，这种方法提供了更大的灵活性，尽管它还需要更多的纪律和治理才能在同一个项目中不使用数百个微前端

在垂直拆分场景中，每个团队负责一个业务领域，例如身份验证或目录体验。在这种情况下，领域驱动设计 (DDD) 就派上用场了。我们很少将 DDD 原则应用于前端架构，但在这种情况下，我们有充分的理由去探索它。

DDD 是一种软件开发方法，它的开发中心是对域模型进行编程，该域模型对域的过程和规则有丰富的理解。为前端应用 DDD 与我们在后端可以做的略有不同。某些概念绝对不适用，尽管还有其他概念对于设计成功的微前端架构至关重要。例如，Netflix 的核心领域是视频流；该核心域中的子域是目录、注册功能和视频播放器。

共有三种子域类型：

Core subdomains 核心子域

这些是应用程序应该存在的主要原因。在我们的组织中，核心子域应被视为优质公民，因为它们提供的价值高于一切。视频目录将是 Netflix 的核心子域。

Supporting subdomains 支持子域

这些子域与核心域相关，但不是关键区别。它们可以支持核心子域，但对于为用户提供真正的价值并不是必不可少的。一个例子是 Netflix 视频的投票系统。

Generic subdomains 通用子域

这些子域用于完成平台。公司通常决定为他们使用现成的软件，因为
他们与他们的领域没有严格的关系。例如，对于 Netflix，支付管理与核心子域（目录）无关，但它是平台的关键部分，因为它可以访问经过身份验证的部分。

让我们用这些类别来分解 Netflix（见表 3-1）。


|  Subdomain type 子域类型      |  Example 例子 |
| ----------- | ----------- |
|  Core subdomain      |  Catalog 目录       |
|  Supportive subdomain   | Voting system 投票系统|  
|  Generic subdomain   |  Sign-in or sign-up   |


